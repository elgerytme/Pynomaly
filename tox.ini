[tox]
envlist = lint, type
skipsdist = true
isolated_build = true

[testenv]
deps = 
    hatch
setenv =
    PYTHONPATH = {toxinidir}/src
    COVERAGE_FILE = {toxinidir}/.coverage

[testenv:lint]
deps =
    ruff>=0.8.0
    black>=24.0.0
    isort>=5.13.0
commands =
    ruff check src --output-format=json --output-file=ruff-report.json
    black --check --diff src
    isort --check-only --diff src

[testenv:type]
deps =
    mypy>=1.13.0
    types-requests
    types-setuptools
    lxml
    -e .
commands =
    mypy --strict --show-error-codes --install-types --non-interactive src --html-report=mypy-report --cobertura-xml-report=mypy-coverage.xml
