# Setup configuration for Pynomaly testing tools

[mutmut]
# Mutation testing configuration
paths_to_mutate = src/pynomaly/
backup = False
runner = python -m pytest tests/mutation/ -x --tb=no
tests_dir = tests/

# Skip files that don't need mutation testing
exclude =
    */__init__.py
    */test_*.py
    */*_test.py

# Mutation operators to use
operators =
    AOD  # Arithmetic operator deletion
    AOR  # Arithmetic operator replacement
    ASR  # Assignment operator replacement
    BCR  # Break continue replacement
    COD  # Conditional operator deletion
    COI  # Conditional operator insertion
    CRP  # Constant replacement
    DDL  # Decorator deletion
    EHD  # Exception handler deletion
    EXS  # Exception swallowing
    IHD  # Hiding variable deletion
    IOD  # Overriding method deletion
    IOP  # Overridden method calling position change
    LCR  # Logical connector replacement
    LOD  # Logical operator deletion
    LOR  # Logical operator replacement
    ROR  # Relational operator replacement
    SCD  # Super calling deletion
    SCI  # Super calling insertion
    SIR  # Slice index remove

[coverage:run]
# Additional coverage configuration
parallel = True
concurrency = multiprocessing
data_file = .coverage

[coverage:combine]
# Parallel coverage combining
strict = True

[mypy]
# Type checking configuration for tests
files = src/pynomaly/, tests/
python_version = 3.11
strict = True
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
ignore_missing_imports = True

# Per-module options
[mypy-tests.*]
# Slightly relaxed rules for tests
disallow_untyped_defs = False
ignore_missing_imports = True

[mypy-hypothesis.*]
ignore_missing_imports = True

[mypy-pytest_bdd.*]
ignore_missing_imports = True

[bandit]
# Security testing configuration
targets = src/pynomaly/
exclude_dirs = tests/
skips = B101,B601
severity = medium

[flake8]
# Code style configuration
max-line-length = 88
extend-ignore = E203,W503,D100,D104
docstring-convention = google
per-file-ignores =
    __init__.py:F401
    tests/*:D
    */test_*.py:D

[isort]
# Import sorting configuration
profile = black
line_length = 88
multi_line_output = 3
include_trailing_comma = True
force_grid_wrap = 0
use_parentheses = True
ensure_newline_before_comments = True
skip_gitignore = True

[tool:black]
# Code formatting configuration
line-length = 88
target-version = py311
include = \.pyi?$
extend-exclude = \.eggs|\.git|\.hg|\.mypy_cache|\.tox|\.venv|build|dist
