# Pynomaly Production Environment Configuration
# Copy this file to .env.production and configure with production values

#=============================================================================
# Application Configuration
#=============================================================================
PYNOMALY_ENVIRONMENT=production
PYNOMALY_LOG_LEVEL=INFO
VERSION=latest
BUILD_DATE=2024-07-10T12:00:00Z
VCS_REF=HEAD

#=============================================================================
# Service Ports
#=============================================================================
API_PORT=8000
WEB_PORT=8080
METRICS_PORT=9090
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
FLOWER_PORT=5555

#=============================================================================
# Database Configuration
#=============================================================================
POSTGRES_PASSWORD=your_secure_postgres_password_here
POSTGRES_USER=pynomaly
POSTGRES_DB=pynomaly
POSTGRES_PORT=5432
DATABASE_URL=postgresql://pynomaly:${POSTGRES_PASSWORD}@postgres:5432/pynomaly

#=============================================================================
# Redis Configuration
#=============================================================================
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_PORT=6379

#=============================================================================
# Application Security
#=============================================================================
SECRET_KEY=your_super_secret_application_key_here_min_32_chars
JWT_SECRET_KEY=your_jwt_secret_key_here_min_64_chars
JWT_REFRESH_SECRET_KEY=your_jwt_refresh_secret_key_here_min_64_chars
ENCRYPTION_KEY=your_data_encryption_key_here_exactly_32_chars

#=============================================================================
# Monitoring Credentials
#=============================================================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_admin_password_here
GRAFANA_DOMAIN=localhost
PROMETHEUS_PASSWORD=your_prometheus_password_here
FLOWER_USER=admin
FLOWER_PASSWORD=your_flower_password_here

#=============================================================================
# External Services
#=============================================================================
# OpenAI API (Optional)
OPENAI_API_KEY=your_openai_api_key_here

# Sentry (Optional)
SENTRY_DSN=your_sentry_dsn_here

# Email Configuration (Optional)
EMAIL_HOST=smtp.your-email-provider.com
EMAIL_PORT=587
EMAIL_USER=your_email_user
EMAIL_PASSWORD=your_email_password
EMAIL_USE_TLS=true

#=============================================================================
# Cloud Storage (AWS S3)
#=============================================================================
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-west-2
S3_BUCKET_NAME=pynomaly-production-storage

#=============================================================================
# Security Configuration
#=============================================================================
# SSL/TLS (if using custom certificates)
SSL_CERT_PATH=/app/ssl/tls.crt
SSL_KEY_PATH=/app/ssl/tls.key

# CORS settings
ALLOWED_ORIGINS=https://your-domain.com,https://api.your-domain.com
ALLOWED_HOSTS=your-domain.com,api.your-domain.com

#=============================================================================
# Performance & Scaling
#=============================================================================
# Worker configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_MAX_TASKS_PER_CHILD=1000

# Database connection pool
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30

# Redis connection pool
REDIS_MAX_CONNECTIONS=50
REDIS_CONNECTION_TIMEOUT=5

#=============================================================================
# Feature Flags
#=============================================================================
ENABLE_DEBUG=false
ENABLE_PROFILING=false
ENABLE_SWAGGER_UI=false
ENABLE_REDOC=false
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true
ENABLE_RATE_LIMITING=true
ENABLE_CACHING=true

#=============================================================================
# Backup Configuration
#=============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_here

#=============================================================================
# Alerting Configuration
#=============================================================================
# Slack notifications (Optional)
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
SLACK_CHANNEL=#alerts

# PagerDuty (Optional)
PAGERDUTY_API_KEY=your_pagerduty_api_key_here
PAGERDUTY_SERVICE_KEY=your_pagerduty_service_key_here

# Teams notifications (Optional)
TEAMS_WEBHOOK_URL=your_teams_webhook_url_here

#=============================================================================
# Development Overrides (for testing)
#=============================================================================
# Set to 'true' to enable development mode features in production
# WARNING: Only use for testing, never in real production!
DEV_MODE=false
SKIP_MIGRATIONS=false
MOCK_EXTERNAL_SERVICES=false

#=============================================================================
# Container Resource Limits
#=============================================================================
API_MEMORY_LIMIT=2G
API_CPU_LIMIT=1.0
WORKER_MEMORY_LIMIT=4G
WORKER_CPU_LIMIT=2.0
DATABASE_MEMORY_LIMIT=4G
DATABASE_CPU_LIMIT=2.0
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=0.5

#=============================================================================
# Security Headers Configuration
#=============================================================================
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_FRAME_DENY=true
SECURE_REFERRER_POLICY=strict-origin-when-cross-origin

#=============================================================================
# Logging Configuration
#=============================================================================
LOG_FORMAT=json
LOG_RETENTION_DAYS=30
LOG_MAX_FILE_SIZE=100MB
ENABLE_ACCESS_LOGS=true
ENABLE_ERROR_TRACKING=true
ENABLE_PERFORMANCE_LOGGING=true

#=============================================================================
# Network Configuration
#=============================================================================
NETWORK_SUBNET=172.20.0.0/16
ENABLE_IPV6=false
DNS_SERVERS=8.8.8.8,8.8.4.4
