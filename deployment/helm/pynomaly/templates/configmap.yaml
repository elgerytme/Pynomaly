apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "pynomaly.fullname" . }}-config
  labels:
    {{- include "pynomaly.labels" . | nindent 4 }}
data:
  # Application configuration
  PYNOMALY_DEBUG: {{ .Values.config.app.debug | quote }}
  PYNOMALY_TIMEOUT: {{ .Values.config.app.timeout | quote }}
  PYNOMALY_KEEP_ALIVE: {{ .Values.config.app.keep_alive | quote }}
  
  # Database configuration
  PYNOMALY_DATABASE_HOST: {{ .Values.config.database.host | quote }}
  PYNOMALY_DATABASE_PORT: {{ .Values.config.database.port | quote }}
  PYNOMALY_DATABASE_NAME: {{ .Values.config.database.name | quote }}
  PYNOMALY_DATABASE_USERNAME: {{ .Values.config.database.username | quote }}
  PYNOMALY_DATABASE_SSL_MODE: {{ .Values.config.database.ssl_mode | quote }}
  PYNOMALY_DATABASE_POOL_SIZE: {{ .Values.config.database.pool_size | quote }}
  PYNOMALY_DATABASE_MAX_OVERFLOW: {{ .Values.config.database.max_overflow | quote }}
  PYNOMALY_DATABASE_POOL_TIMEOUT: {{ .Values.config.database.pool_timeout | quote }}
  PYNOMALY_DATABASE_POOL_RECYCLE: {{ .Values.config.database.pool_recycle | quote }}
  
  # Redis configuration
  PYNOMALY_REDIS_HOST: {{ .Values.config.redis.host | quote }}
  PYNOMALY_REDIS_PORT: {{ .Values.config.redis.port | quote }}
  PYNOMALY_REDIS_DB: {{ .Values.config.redis.db | quote }}
  PYNOMALY_REDIS_SSL: {{ .Values.config.redis.ssl | quote }}
  PYNOMALY_REDIS_SSL_CERT_REQS: {{ .Values.config.redis.ssl_cert_reqs | quote }}
  PYNOMALY_REDIS_CONNECTION_POOL_MAX_CONNECTIONS: {{ .Values.config.redis.connection_pool_max_connections | quote }}
  
  # Security configuration
  PYNOMALY_JWT_ALGORITHM: {{ .Values.config.security.jwt_algorithm | quote }}
  PYNOMALY_JWT_EXPIRATION: {{ .Values.config.security.jwt_expiration | quote }}
  PYNOMALY_RATE_LIMIT_ENABLED: {{ .Values.config.security.rate_limit_enabled | quote }}
  PYNOMALY_RATE_LIMIT_REQUESTS_PER_MINUTE: {{ .Values.config.security.rate_limit_requests_per_minute | quote }}