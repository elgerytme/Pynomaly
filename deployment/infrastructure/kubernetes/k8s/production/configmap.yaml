apiVersion: v1
kind: ConfigMap
metadata:
  name: pynomaly-prod-config
  namespace: pynomaly-prod
  labels:
    app: pynomaly
    component: config
    environment: production
data:
  PYNOMALY_ENV: "production"
  PYNOMALY_DEBUG: "false"
  PYNOMALY_LOG_LEVEL: "INFO"
  PYNOMALY_API_HOST: "0.0.0.0"
  PYNOMALY_API_PORT: "8000"
  PROMETHEUS_ENABLED: "true"
  METRICS_ENDPOINT: "/metrics"
  HEALTH_CHECK_ENDPOINT: "/health"
  REDIS_HOST: "redis-prod-service"
  REDIS_PORT: "6379"
  POSTGRES_HOST: "postgres-prod-service"
  POSTGRES_PORT: "5432"
  POSTGRES_DB: "pynomaly_prod"
  MONGODB_HOST: "mongodb-prod-service"
  MONGODB_PORT: "27017"
  MONGODB_DB: "pynomaly_prod"
  
  # Production-specific settings
  ENABLE_SWAGGER: "false"
  ENABLE_DEBUG_ENDPOINTS: "false"
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS: "10000"
  RATE_LIMIT_PERIOD: "3600"
  
  # Security settings
  CORS_ENABLED: "true"
  CORS_ORIGINS: "https://pynomaly.com,https://app.pynomaly.com"
  SECURITY_HEADERS_ENABLED: "true"
  CSRF_PROTECTION_ENABLED: "true"
  
  # Performance settings
  CACHE_ENABLED: "true"
  CACHE_TTL: "3600"
  CONNECTION_POOL_SIZE: "100"
  MAX_CONCURRENT_REQUESTS: "10000"
  
  # Feature flags for production
  FEATURE_NEW_ALGORITHMS: "true"
  FEATURE_EXPERIMENTAL_UI: "false"
  FEATURE_ADVANCED_MONITORING: "true"
  FEATURE_ML_GOVERNANCE: "true"
  
  # Monitoring and observability
  DISTRIBUTED_TRACING_ENABLED: "true"
  JAEGER_AGENT_HOST: "jaeger-agent"
  JAEGER_AGENT_PORT: "6831"
  SENTRY_ENABLED: "true"
  
  # Backup and recovery
  BACKUP_ENABLED: "true"
  BACKUP_SCHEDULE: "0 2 * * *"
  BACKUP_RETENTION_DAYS: "90"
  
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: pynomaly-prod-app-config
  namespace: pynomaly-prod
  labels:
    app: pynomaly
    component: app-config
    environment: production
data:
  # Application configuration
  APP_NAME: "Pynomaly"
  APP_VERSION: "1.0.0"
  APP_DESCRIPTION: "Production Anomaly Detection Platform"
  
  # Database configuration
  DB_POOL_SIZE: "50"
  DB_POOL_TIMEOUT: "30"
  DB_POOL_RECYCLE: "3600"
  DB_ECHO: "false"
  
  # Redis configuration
  REDIS_MAX_CONNECTIONS: "100"
  REDIS_SOCKET_TIMEOUT: "5"
  REDIS_SOCKET_CONNECT_TIMEOUT: "5"
  REDIS_RETRY_ON_TIMEOUT: "true"
  
  # ML Configuration
  ML_MODEL_CACHE_SIZE: "1000"
  ML_PREDICTION_TIMEOUT: "30"
  ML_BATCH_SIZE: "1000"
  ML_PARALLEL_JOBS: "4"
  
  # Security configuration
  JWT_ALGORITHM: "RS256"
  JWT_ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  JWT_REFRESH_TOKEN_EXPIRE_DAYS: "7"
  PASSWORD_MIN_LENGTH: "12"
  PASSWORD_REQUIRE_UPPERCASE: "true"
  PASSWORD_REQUIRE_LOWERCASE: "true"
  PASSWORD_REQUIRE_NUMBERS: "true"
  PASSWORD_REQUIRE_SYMBOLS: "true"
  
  # API configuration
  API_V1_PREFIX: "/api/v1"
  API_DOCS_URL: "/docs"
  API_REDOC_URL: "/redoc"
  API_OPENAPI_URL: "/openapi.json"
  
  # File upload configuration
  MAX_FILE_SIZE: "100MB"
  ALLOWED_FILE_EXTENSIONS: ".csv,.json,.parquet,.xlsx"
  UPLOAD_TIMEOUT: "300"
  
  # Async configuration
  ASYNC_POOL_SIZE: "10"
  ASYNC_QUEUE_SIZE: "1000"
  ASYNC_TIMEOUT: "300"
