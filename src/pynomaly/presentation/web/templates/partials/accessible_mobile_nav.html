<!-- Mobile Navigation with Accessibility Features -->
<a
  href="/"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if request.url.path == '/' %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if request.url.path == '/' %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">📊</span> Dashboard
  <span class="sr-only"> - Main dashboard view</span>
</a>

<a
  href="/datasets"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/datasets' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/datasets' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">📁</span> Datasets
  <span class="sr-only"> - Manage data files</span>
</a>

<a
  href="/detectors"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/detectors' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/detectors' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">🔍</span> Detectors
  <span class="sr-only"> - Configure detection algorithms</span>
</a>

<a
  href="/detection"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/detection' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/detection' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">🎯</span> Detection
  <span class="sr-only"> - Run anomaly detection</span>
</a>

<!-- Expandable sections for mobile -->
<div class="mobile-nav-section">
  <button
    class="w-full text-left pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 text-base font-medium flex items-center justify-between transition-colors"
    aria-expanded="false"
    aria-controls="mobile-automl-section"
    onclick="toggleMobileSection('mobile-automl-section', this)"
  >
    <span>
      <span aria-hidden="true">⚡</span> AutoML & Analysis
    </span>
    <svg
      class="h-4 w-4 transition-transform"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  <div id="mobile-automl-section" class="hidden pl-6">
    <a
      href="/automl"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">⚡</span> AutoML
    </a>
    <a
      href="/explainability"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">🔍</span> Explainability
    </a>
    <a
      href="/experiments"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">🧪</span> Experiments
    </a>
  </div>
</div>

<div class="mobile-nav-section">
  <button
    class="w-full text-left pl-3 pr-4 py-2 border-l-4 border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 text-base font-medium flex items-center justify-between transition-colors"
    aria-expanded="false"
    aria-controls="mobile-viz-section"
    onclick="toggleMobileSection('mobile-viz-section', this)"
  >
    <span>
      <span aria-hidden="true">📊</span> Visualizations
    </span>
    <svg
      class="h-4 w-4 transition-transform"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  <div id="mobile-viz-section" class="hidden pl-6">
    <a
      href="/visualizations"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">📊</span> Standard Charts
    </a>
    <a
      href="/advanced-visualizations"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">📈</span> Advanced Viz
    </a>
    <a
      href="/monitoring"
      role="menuitem"
      class="block pl-3 pr-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors"
    >
      <span aria-hidden="true">📡</span> Real-time Monitor
    </a>
  </div>
</div>

<a
  href="/workflows"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/workflows' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/workflows' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">🔄</span> Workflows
  <span class="sr-only"> - Workflow automation</span>
</a>

<a
  href="/collaboration"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/collaboration' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/collaboration' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">👥</span> Collaborate
  <span class="sr-only"> - Team collaboration</span>
</a>

<a
  href="/exports"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/exports' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/exports' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">📤</span> Exports
  <span class="sr-only"> - Export data and results</span>
</a>

{% if auth_enabled and current_user %}
<a
  href="/users"
  role="menuitem"
  class="block pl-3 pr-4 py-2 border-l-4 {% if '/users' in request.url.path %}border-primary bg-blue-50 text-primary{% else %}border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800{% endif %} text-base font-medium transition-colors"
  {% if '/users' in request.url.path %}aria-current="page"{% endif %}
>
  <span aria-hidden="true">👥</span> Users
  <span class="sr-only"> - User management</span>
</a>
{% endif %}

<!-- Mobile section toggle script -->
<script>
function toggleMobileSection(sectionId, button) {
  const section = document.getElementById(sectionId);
  const isExpanded = button.getAttribute('aria-expanded') === 'true';
  const icon = button.querySelector('svg');
  
  if (isExpanded) {
    section.classList.add('hidden');
    button.setAttribute('aria-expanded', 'false');
    icon.style.transform = 'rotate(0deg)';
  } else {
    section.classList.remove('hidden');
    button.setAttribute('aria-expanded', 'true');
    icon.style.transform = 'rotate(180deg)';
  }
}
</script>