(()=>{var n=class{constructor(){this.metrics={},this.observers=new Map,this.init()}init(){this.setupCoreWebVitals(),this.setupResourceMonitoring(),this.setupLongTaskMonitoring()}setupCoreWebVitals(){if("PerformanceObserver"in window){let e=new PerformanceObserver(o=>{for(let s of o.getEntries())this.recordMetric("lcp",s.startTime)});e.observe({type:"largest-contentful-paint",buffered:!0}),this.observers.set("lcp",e);let t=new PerformanceObserver(o=>{for(let s of o.getEntries()){let c=s.processingStart-s.startTime;this.recordMetric("fid",c)}});t.observe({type:"first-input",buffered:!0}),this.observers.set("fid",t);let r=0,i=new PerformanceObserver(o=>{for(let s of o.getEntries())s.hadRecentInput||(r+=s.value);this.recordMetric("cls",r)});i.observe({type:"layout-shift",buffered:!0}),this.observers.set("cls",i)}}setupResourceMonitoring(){if("PerformanceObserver"in window){let e=new PerformanceObserver(t=>{for(let r of t.getEntries())r.duration>1e3&&console.warn("Slow resource:",r.name,`${r.duration}ms`)});e.observe({type:"resource",buffered:!0}),this.observers.set("resource",e)}}setupLongTaskMonitoring(){if("PerformanceObserver"in window){let e=new PerformanceObserver(t=>{for(let r of t.getEntries())console.warn("Long task detected:",`${r.duration}ms`),this.recordMetric("long-task",r.duration)});e.observe({type:"longtask",buffered:!0}),this.observers.set("longtask",e)}}recordMetric(e,t){if(this.metrics[e]=t,navigator.sendBeacon){let r=JSON.stringify({metric:e,value:t,timestamp:Date.now(),url:window.location.href});navigator.sendBeacon("/api/analytics/performance",r)}}getMetrics(){return{...this.metrics}}destroy(){this.observers.forEach(e=>{e.disconnect()}),this.observers.clear()}};typeof window<"u"&&(window.PerformanceMonitor=new n);})();
