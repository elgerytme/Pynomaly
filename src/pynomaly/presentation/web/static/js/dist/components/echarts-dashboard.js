(()=>{var g=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var y=g((x,h)=>{var c=class{constructor(){this.charts=new Map,this.themes={light:{backgroundColor:"#ffffff",textStyle:{color:"#1e293b"},title:{textStyle:{color:"#1e293b"}},legend:{textStyle:{color:"#64748b"}},grid:{borderColor:"#e2e8f0"},categoryAxis:{axisLine:{lineStyle:{color:"#e2e8f0"}},axisTick:{lineStyle:{color:"#e2e8f0"}},axisLabel:{color:"#64748b"},splitLine:{lineStyle:{color:"#f1f5f9"}}},valueAxis:{axisLine:{lineStyle:{color:"#e2e8f0"}},axisTick:{lineStyle:{color:"#e2e8f0"}},axisLabel:{color:"#64748b"},splitLine:{lineStyle:{color:"#f1f5f9"}}},colorBy:"series",color:["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4"]},dark:{backgroundColor:"#1e293b",textStyle:{color:"#f1f5f9"},title:{textStyle:{color:"#f1f5f9"}},legend:{textStyle:{color:"#94a3b8"}},grid:{borderColor:"#4b5563"},categoryAxis:{axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{color:"#94a3b8"},splitLine:{lineStyle:{color:"#374151"}}},valueAxis:{axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{color:"#94a3b8"},splitLine:{lineStyle:{color:"#374151"}}},colorBy:"series",color:["#38bdf8","#4ade80","#fbbf24","#f87171","#a78bfa","#22d3ee"]}},this.currentTheme="light",this.setupEventListeners()}setupEventListeners(){document.addEventListener("theme-changed",e=>{this.currentTheme=e.detail.theme,this.updateAllChartsTheme()}),window.addEventListener("resize",this.debounce(()=>{this.resizeAllCharts()},250))}debounce(e,i){let t;return function(...n){let o=()=>{clearTimeout(t),e(...n)};clearTimeout(t),t=setTimeout(o,i)}}getTheme(){return this.themes[this.currentTheme]}registerChart(e,i){this.charts.set(e,i)}removeChart(e){let i=this.charts.get(e);i&&i.dispose(),this.charts.delete(e)}updateAllChartsTheme(){this.charts.forEach(e=>{if(e&&!e.isDisposed()){let i=this.getTheme();e.setOption(i,!0),e.resize()}})}resizeAllCharts(){this.charts.forEach(e=>{e&&!e.isDisposed()&&e.resize()})}},s=class{constructor(e,i={}){this.container=typeof e=="string"?document.querySelector(e):e,this.options={responsive:!0,accessibility:!0,animation:!0,theme:"light",...i},this.chart=null,this.data=[],this.init(),this.setupAccessibility();let t=this.container.id||`chart-${Date.now()}`;p.registerChart(t,this.chart)}init(){if(!this.container)throw new Error("Container element not found");this.chart=echarts.init(this.container,null,{renderer:"canvas",useDirtyRect:!0}),this.applyTheme(),this.options.responsive&&this.setupResizeObserver(),this.setupEventListeners()}setupAccessibility(){if(this.options.accessibility){if(this.container.setAttribute("role","img"),this.container.setAttribute("aria-label",this.options.title||"Chart visualization"),this.options.description){let e=`${this.container.id||"chart"}-desc`,i=document.getElementById(e);i||(i=document.createElement("div"),i.id=e,i.className="sr-only",i.textContent=this.options.description,this.container.parentNode.insertBefore(i,this.container.nextSibling)),this.container.setAttribute("aria-describedby",e)}this.container.setAttribute("tabindex","0")}}setupResizeObserver(){"ResizeObserver"in window&&(this.resizeObserver=new ResizeObserver(()=>{this.chart&&!this.chart.isDisposed()&&this.chart.resize()}),this.resizeObserver.observe(this.container))}setupEventListeners(){this.chart.on("click",e=>{this.container.dispatchEvent(new CustomEvent("chart-click",{detail:{params:e,chart:this}}))}),this.chart.on("mouseover",e=>{this.container.dispatchEvent(new CustomEvent("chart-hover",{detail:{params:e,chart:this}}))}),this.container.addEventListener("keydown",e=>{this.handleKeyboardNavigation(e)})}handleKeyboardNavigation(e){switch(e.key){case"Enter":case" ":e.preventDefault(),this.announceChartData();break;case"Escape":this.container.blur();break}}announceChartData(){if(!this.options.accessibility)return;let e=this.generateDataAnnouncement();this.announceToScreenReader(e)}generateDataAnnouncement(){return`Chart with ${this.data.length} data points`}announceToScreenReader(e){let i=document.getElementById("chart-announcer")||document.querySelector('[aria-live="polite"]');i&&(i.textContent=e)}applyTheme(){let e=p.getTheme();this.chart.setOption(e,!0)}setData(e){this.data=e,this.updateChart()}updateChart(){throw new Error("updateChart() method must be implemented by subclass")}resize(){this.chart&&!this.chart.isDisposed()&&this.chart.resize()}dispose(){this.resizeObserver&&this.resizeObserver.disconnect(),this.chart&&!this.chart.isDisposed()&&this.chart.dispose()}},d=class extends s{constructor(e,i={}){super(e,{title:"System Performance Metrics",description:"Real-time visualization of CPU, memory, and network utilization",metrics:["cpu","memory","network"],updateInterval:2e3,maxDataPoints:100,...i}),this.metricColors={cpu:"#ef4444",memory:"#f59e0b",network:"#22c55e",disk:"#8b5cf6",response_time:"#06b6d4"},this.setupRealTimeUpdates()}updateChart(){let e={title:{text:this.options.title,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:i=>{let t=`<strong>${i[0].axisValue}</strong><br/>`;return i.forEach(a=>{let n=typeof a.value=="number"?a.value.toFixed(2):a.value;t+=`${a.marker} ${a.seriesName}: ${n}%<br/>`}),t}},legend:{data:this.options.metrics.map(i=>i.toUpperCase()),top:30,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"3%",top:80,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.data.map(i=>i.timestamp),axisLabel:{formatter:i=>new Date(i).toLocaleTimeString()}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:this.options.metrics.map(i=>({name:i.toUpperCase(),type:"line",stack:!1,smooth:!0,symbol:"circle",symbolSize:4,lineStyle:{width:2},areaStyle:{opacity:.1},data:this.data.map(t=>t[i]||0),itemStyle:{color:this.metricColors[i]||"#0ea5e9"}})),animation:this.options.animation,animationDuration:1e3,animationEasing:"cubicOut"};this.chart.setOption(e)}setupRealTimeUpdates(){this.options.updateInterval>0&&(this.updateTimer=setInterval(()=>{this.addRandomDataPoint()},this.options.updateInterval))}addRandomDataPoint(){let i={timestamp:new Date().toISOString()};if(this.options.metrics.forEach(t=>{switch(t){case"cpu":i[t]=Math.max(0,Math.min(100,(this.data.length>0?this.data[this.data.length-1][t]:50)+(Math.random()-.5)*20));break;case"memory":i[t]=Math.max(0,Math.min(100,(this.data.length>0?this.data[this.data.length-1][t]:60)+(Math.random()-.5)*10));break;case"network":i[t]=Math.max(0,Math.min(100,Math.random()*30+10));break;default:i[t]=Math.random()*100}}),this.data.push(i),this.data.length>this.options.maxDataPoints&&(this.data=this.data.slice(-this.options.maxDataPoints)),this.updateChart(),this.options.accessibility){let t=this.options.metrics.find(a=>i[a]>90);t&&this.announceToScreenReader(`High ${t} usage detected: ${i[t].toFixed(1)}%`)}}generateDataAnnouncement(){if(this.data.length===0)return"No performance data available";let e=this.data[this.data.length-1];return`Current performance metrics: ${this.options.metrics.map(t=>`${t}: ${(e[t]||0).toFixed(1)}%`).join(", ")}`}dispose(){this.updateTimer&&clearInterval(this.updateTimer),super.dispose()}},m=class extends s{constructor(e,i={}){super(e,{title:"Anomaly Distribution Analysis",description:"Statistical distribution of detected anomalies by type and confidence",chartType:"pie",showConfidenceRanges:!0,...i})}updateChart(){this.options.chartType==="pie"?this.updatePieChart():this.options.chartType==="bar"?this.updateBarChart():this.options.chartType==="histogram"&&this.updateHistogramChart()}updatePieChart(){let e=this.data.reduce((a,n)=>{let o=n.type||"Unknown";return a[o]=(a[o]||0)+1,a},{}),i=Object.entries(e).map(([a,n])=>({name:a,value:n,itemStyle:{color:this.getAnomalyTypeColor(a)}})),t={title:{text:this.options.title,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:a=>{let n=(a.value/this.data.length*100).toFixed(1);return`<strong>${a.name}</strong><br/>
                  Count: ${a.value}<br/>
                  Percentage: ${n}%`}},legend:{orient:"vertical",left:"left",top:"center",textStyle:{fontSize:12}},series:[{name:"Anomaly Types",type:"pie",radius:["40%","70%"],center:["60%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"16",fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},labelLine:{show:!1},data:i}],animation:this.options.animation,animationType:"expansion",animationEasing:"elasticOut",animationDelay:a=>a*100};this.chart.setOption(t)}updateBarChart(){let e={"Low (0-0.5)":0,"Medium (0.5-0.8)":0,"High (0.8-0.95)":0,"Very High (0.95+)":0};this.data.forEach(t=>{let a=t.confidence||0;a<.5?e["Low (0-0.5)"]++:a<.8?e["Medium (0.5-0.8)"]++:a<.95?e["High (0.8-0.95)"]++:e["Very High (0.95+)"]++});let i={title:{text:"Anomalies by Confidence Level",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{let a=t[0],n=(a.value/this.data.length*100).toFixed(1);return`<strong>${a.name}</strong><br/>
                  Count: ${a.value}<br/>
                  Percentage: ${n}%`}},grid:{left:"3%",right:"4%",bottom:"3%",top:60,containLabel:!0},xAxis:{type:"category",data:Object.keys(e),axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",name:"Count",nameLocation:"middle",nameGap:50},series:[{name:"Anomalies",type:"bar",data:Object.values(e),itemStyle:{color:t=>["#fbbf24","#f59e0b","#ef4444","#dc2626"][t.dataIndex]||"#0ea5e9",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}}}],animation:this.options.animation,animationDelay:t=>t*100};this.chart.setOption(i)}updateHistogramChart(){let e=this.data.map(a=>a.score||a.confidence||0),i=this.createHistogramBins(e,20),t={title:{text:"Anomaly Score Distribution",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:a=>{let n=a[0];return`<strong>Score Range: ${n.name}</strong><br/>
                  Count: ${n.value}<br/>
                  Density: ${(n.value/this.data.length).toFixed(3)}`}},grid:{left:"3%",right:"4%",bottom:"3%",top:60,containLabel:!0},xAxis:{type:"category",data:i.map(a=>a.range),name:"Anomaly Score",nameLocation:"middle",nameGap:30},yAxis:{type:"value",name:"Frequency",nameLocation:"middle",nameGap:50},series:[{name:"Frequency",type:"bar",data:i.map(a=>a.count),itemStyle:{color:"#0ea5e9",borderRadius:[2,2,0,0]},emphasis:{itemStyle:{color:"#0284c7"}}}],animation:this.options.animation};this.chart.setOption(t)}createHistogramBins(e,i){let t=Math.min(...e),n=(Math.max(...e)-t)/i,o=Array.from({length:i},(f,l)=>({range:`${(t+l*n).toFixed(2)}-${(t+(l+1)*n).toFixed(2)}`,count:0,min:t+l*n,max:t+(l+1)*n}));return e.forEach(f=>{let l=Math.min(Math.floor((f-t)/n),i-1);o[l].count++}),o}getAnomalyTypeColor(e){return{"Statistical Outlier":"#ef4444","Temporal Anomaly":"#f59e0b","Pattern Deviation":"#22c55e","Threshold Violation":"#8b5cf6","Trend Anomaly":"#06b6d4",Unknown:"#6b7280"}[e]||"#0ea5e9"}generateDataAnnouncement(){if(this.data.length===0)return"No anomaly data available";let e=[...new Set(this.data.map(t=>t.type||"Unknown"))],i=this.data.reduce((t,a)=>t+(a.confidence||0),0)/this.data.length;return`${this.data.length} anomalies detected across ${e.length} types. Average confidence: ${(i*100).toFixed(1)}%`}},u=class extends s{constructor(e,i={}){super(e,{title:"Anomaly Detection Timeline",description:"Chronological view of anomaly detection events with severity indicators",timeRange:"24h",showSeverityLevels:!0,groupByHour:!1,...i})}updateChart(){let e=this.processTimelineData(),i={title:{text:this.options.title,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",animation:!1},formatter:t=>{let a=`<strong>${t[0].axisValue}</strong><br/>`;return t.forEach(n=>{a+=`${n.marker} ${n.seriesName}: ${n.value}<br/>`}),a}},legend:{data:["Low Severity","Medium Severity","High Severity","Critical"],top:30,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"3%",top:80,containLabel:!0},xAxis:{type:"category",data:e.timeline,axisLabel:{formatter:t=>{let a=new Date(t);return this.options.timeRange==="1h"||this.options.timeRange==="6h"?a.toLocaleTimeString():this.options.timeRange==="24h"?`${a.getHours()}:00`:a.toLocaleDateString()}}},yAxis:{type:"value",name:"Count",nameLocation:"middle",nameGap:50,min:0},series:[{name:"Low Severity",type:"bar",stack:"severity",data:e.low,itemStyle:{color:"#22c55e"}},{name:"Medium Severity",type:"bar",stack:"severity",data:e.medium,itemStyle:{color:"#f59e0b"}},{name:"High Severity",type:"bar",stack:"severity",data:e.high,itemStyle:{color:"#ef4444"}},{name:"Critical",type:"bar",stack:"severity",data:e.critical,itemStyle:{color:"#dc2626"}}],animation:this.options.animation,animationDelay:t=>t*50};this.chart.setOption(i)}processTimelineData(){let e=this.createTimeBuckets(),i={timeline:e.map(t=>t.label),low:new Array(e.length).fill(0),medium:new Array(e.length).fill(0),high:new Array(e.length).fill(0),critical:new Array(e.length).fill(0)};return this.data.forEach(t=>{let a=new Date(t.timestamp),n=this.findTimeBucket(a,e);if(n>=0){let o=this.getSeverityLevel(t);i[o][n]++}}),i}createTimeBuckets(){let e=new Date,i=[];switch(this.options.timeRange){case"1h":for(let t=59;t>=0;t--){let a=new Date(e.getTime()-t*6e4);i.push({start:a,end:new Date(a.getTime()+6e4),label:a.toISOString()})}break;case"6h":for(let t=35;t>=0;t--){let a=new Date(e.getTime()-t*6e5);i.push({start:a,end:new Date(a.getTime()+6e5),label:a.toISOString()})}break;case"24h":for(let t=23;t>=0;t--){let a=new Date(e.getTime()-t*36e5);i.push({start:a,end:new Date(a.getTime()+36e5),label:a.toISOString()})}break;case"7d":for(let t=6;t>=0;t--){let a=new Date(e.getTime()-t*864e5);i.push({start:a,end:new Date(a.getTime()+864e5),label:a.toISOString()})}break;default:for(let t=29;t>=0;t--){let a=new Date(e.getTime()-t*864e5);i.push({start:a,end:new Date(a.getTime()+864e5),label:a.toISOString()})}}return i}findTimeBucket(e,i){return i.findIndex(t=>e>=t.start&&e<t.end)}getSeverityLevel(e){let i=e.confidence||0,t=e.score||i;return t>=.95?"critical":t>=.8?"high":t>=.5?"medium":"low"}generateDataAnnouncement(){if(this.data.length===0)return"No detection events in timeline";let e={low:0,medium:0,high:0,critical:0};this.data.forEach(n=>{let o=this.getSeverityLevel(n);e[o]++});let i=this.data.length,t=e.critical,a=e.high;return`Timeline shows ${i} detection events. ${t} critical and ${a} high severity anomalies detected.`}},p=new c;typeof h<"u"&&h.exports?h.exports={EChartsDashboard:c,BaseEChart:s,PerformanceMetricsChart:d,AnomalyDistributionChart:m,DetectionTimelineChart:u}:(window.EChartsDashboard=c,window.BaseEChart=s,window.PerformanceMetricsChart=d,window.AnomalyDistributionChart=m,window.DetectionTimelineChart=u,window.echartsManager=p)});y();})();
