analytics:
  # Analytics dashboard configuration
  dashboard:
    title: "Pynomaly Analytics Dashboard"
    refresh_interval_seconds: 300  # 5 minutes
    auto_refresh: true
    theme: "light"
    
data_sources:
    primary_database:
      type: "postgresql"
      connection_string: "${DATABASE_URL}"
      query_timeout: 30
      connection_pool_size: 10
      
    metrics_database:
      type: "prometheus"
      url: "http://prometheus:9090"
      query_timeout: 15
      
    cache_store:
      type: "redis"
      url: "redis://redis-cluster:6379"
      ttl_seconds: 3600
      
metrics:
    detection_metrics:
      enabled: true
      collection_interval: 60  # seconds
      retention_days: 90
      aggregation_levels:
        - "minute"
        - "hour"
        - "day"
        - "week"
        - "month"
      
    performance_metrics:
      enabled: true
      collection_interval: 30  # seconds
      retention_days: 30
      high_frequency_retention_hours: 24
      
    business_metrics:
      enabled: true
      collection_interval: 300  # 5 minutes
      retention_days: 365
      
features:
    real_time_analytics: true
    predictive_analytics: true
    anomaly_detection_on_metrics: true
    automated_insights: true
    custom_dashboards: true
    alerting: true
    export_capabilities: true
    
  # Visualization settings
  visualization:
    chart_types:
      - "line"
      - "bar"
      - "scatter"
      - "heatmap"
      - "pie"
      - "gauge"
      - "histogram"
      
    color_palette:
      primary: "#667eea"
      secondary: "#f093fb"
      success: "#4ade80"
      warning: "#fbbf24"
      danger: "#f87171"
      info: "#60a5fa"
      
    responsive_design: true
    mobile_optimized: true
    
  # Alerting configuration
  alerting:
    enabled: true
    channels:
      - type: "email"
        enabled: true
        smtp_server: "smtp.gmail.com"
        smtp_port: 587
        
      - type: "slack"
        enabled: true
        webhook_url: "${SLACK_WEBHOOK_URL}"
        
      - type: "webhook"
        enabled: true
        url: "${ALERT_WEBHOOK_URL}"
        
    alert_rules:
      - name: "high_anomaly_rate"
        condition: "anomaly_rate > 0.1"
        severity: "warning"
        cooldown_minutes: 30
        
      - name: "system_performance_degradation"
        condition: "avg_response_time > 1000"
        severity: "critical"
        cooldown_minutes: 15
        
      - name: "low_system_availability"
        condition: "uptime_percentage < 99.0"
        severity: "critical"
        cooldown_minutes: 5
        
      - name: "high_error_rate"
        condition: "error_rate > 0.05"
        severity: "warning"
        cooldown_minutes: 20
        
  # Export configuration
  export:
    formats:
      - "json"
      - "csv"
      - "xlsx"
      - "pdf"
      
    max_export_size_mb: 100
    export_timeout_seconds: 300
    
    scheduled_exports:
      - name: "daily_report"
        schedule: "0 9 * * *"  # 9 AM daily
        format: "pdf"
        recipients: ["admin@pynomaly.com"]
        
      - name: "weekly_summary"
        schedule: "0 9 * * 1"  # 9 AM Mondays
        format: "xlsx"
        recipients: ["management@pynomaly.com"]
        
  # Security and access control
  security:
    authentication_required: true
    rbac_enabled: true
    
    roles:
      - name: "admin"
        permissions:
          - "view_all_analytics"
          - "export_data"
          - "manage_alerts"
          - "manage_dashboards"
          
      - name: "analyst"
        permissions:
          - "view_analytics"
          - "export_data"
          - "create_custom_dashboards"
          
      - name: "viewer"
        permissions:
          - "view_analytics"
          
    data_privacy:
      anonymize_user_data: true
      mask_sensitive_fields: true
      audit_data_access: true
      
  # Performance optimization
  performance:
    query_optimization:
      enabled: true
      query_cache_size_mb: 256
      query_timeout_seconds: 30
      
    data_compression:
      enabled: true
      compression_algorithm: "gzip"
      
    pagination:
      default_page_size: 100
      max_page_size: 1000
      
    indexing:
      auto_index_creation: true
      index_optimization_schedule: "0 2 * * *"  # 2 AM daily
      
  # Machine learning integration
  ml_integration:
    enabled: true
    
    predictive_models:
      - name: "anomaly_forecast"
        type: "time_series"
        update_frequency: "daily"
        
      - name: "performance_prediction"
        type: "regression"
        update_frequency: "hourly"
        
      - name: "user_behavior_clustering"
        type: "clustering"
        update_frequency: "weekly"
        
    automl:
      enabled: true
      experiment_tracking: true
      model_versioning: true
      
  # Data quality monitoring
  data_quality:
    enabled: true
    
    checks:
      - name: "data_completeness"
        threshold: 0.95
        
      - name: "data_freshness"
        max_age_hours: 2
        
      - name: "schema_validation"
        strict_mode: true
        
    remediation:
      auto_fix_enabled: true
      notification_on_issues: true
      
  # Compliance and governance
  compliance:
    gdpr_compliance: true
    data_retention_policies: true
    audit_logging: true
    
    policies:
      - name: "data_retention"
        retention_period_days: 365
        auto_purge: true
        
      - name: "access_logging"
        log_all_access: true
        log_retention_days: 90
        
  # Integration settings
  integrations:
    grafana:
      enabled: true
      url: "http://grafana:3000"
      api_key: "${GRAFANA_API_KEY}"
      
    prometheus:
      enabled: true
      url: "http://prometheus:9090"
      
    elasticsearch:
      enabled: false
      url: "http://elasticsearch:9200"
      
    tableau:
      enabled: false
      server_url: "${TABLEAU_SERVER_URL}"
      
  # Development and debugging
  development:
    debug_mode: false
    sample_data_generation: true
    profiling_enabled: false
    
    logging:
      level: "INFO"
      format: "json"
      file: "/var/log/pynomaly/analytics.log"
      
  # Scaling and clustering
  scaling:
    horizontal_scaling: true
    load_balancing: true
    
    cluster_settings:
      min_nodes: 1
      max_nodes: 10
      auto_scaling_enabled: true
      
    cache_clustering:
      enabled: true
      replication_factor: 2
